# F007 - 實習申請功能

**狀態:** 已完成  
**優先級:** 高  
**預計完成日期:** 已完成  
**負責人:** 開發團隊

## 1. 功能概述

實習申請功能允許神學院學生線上申請教會或機構實習機會。此功能提供完整的申請流程，包括個人資料填寫、教會/機構選擇、實習時段安排、文件上傳等，並支持申請狀態追蹤功能，讓學生可以隨時查看申請進度。

## 2. 需求規格

### 2.1 功能需求

- 提供直觀的實習申請表單，包含申請者基本資料
- 支持選擇實習教會/機構（從預設列表或自訂）
- 實習時段選擇功能（開始日期和結束日期）
- 允許填寫實習目標和期望
- 支持實習相關文件上傳
- 表單提交前進行資料驗證，確保必填欄位完整
- 提交後生成唯一申請編號，便於追蹤
- 顯示申請提交成功的確認訊息
- 狀態追蹤功能，顯示申請是否已審核、通過或駁回
- 支持審核者添加審核意見和建議

### 2.2 相關需求文檔

- 實習申請表單實現在 `src/views/Applications/InternshipApplication.vue`
- 申請狀態和數據管理在 `src/stores/application.js`
- 模擬數據和處理邏輯在 `src/mocks/domains/applications/`

## 3. 使用者故事

**作為** 神學院學生，  
**我希望** 能夠線上申請實習機會，  
**以便** 實踐所學並獲得實際教會/機構工作經驗。

**作為** 申請學生，  
**我希望** 能夠追蹤我的實習申請狀態，  
**以便** 了解目前處理進度。

**作為** 實習計劃管理者，  
**我希望** 能夠方便地審核實習申請並提供反饋，  
**以便** 合理安排學生實習並提供適當指導。

**作為** 系統管理員，  
**我希望** 能夠查看所有實習申請的統計數據，  
**以便** 了解整體實習趨勢和需求。

## 4. 流程設計

### 4.1 業務流程

1. 學生登入系統
2. 學生訪問實習申請頁面
3. 填寫個人資料及實習相關資訊
4. 選擇實習教會/機構
5. 設置實習時間段
6. 上傳相關文件（如推薦信等）
7. 提交申請並獲得唯一申請編號
8. 實習計劃管理者審核申請
9. 學生可隨時查看申請狀態和結果

### 4.2 使用流程

**學生提交申請：**

1. 進入實習申請頁面
2. 填寫個人基本資料（姓名、學號、聯絡方式等）
3. 選擇希望實習的教會/機構（從下拉選單或自行輸入）
4. 選擇實習開始和結束日期
5. 填寫實習目標和期望
6. 上傳相關文件
7. 提交申請並接收確認訊息

**管理者審核：**

1. 查看待審核的實習申請
2. 審閱申請詳情和附件
3. 確認實習地點和時間是否合適
4. 提供審核意見
5. 批准或駁回申請

### 4.3 狀態轉換

- 新申請 -> 待審核：學生提交申請後
- 待審核 -> 已通過：管理者批准申請
- 待審核 -> 已駁回：管理者駁回申請
- 已通過 -> 進行中：實習開始
- 進行中 -> 已完成：實習結束並提交評估

## 5. 技術設計

### 5.1 架構設計

實習申請功能基於 Vue 3 + Pinia 實現：

- 前端使用 Vue 3 和 Ant Design Vue 構建表單界面
- 使用 Pinia 進行狀態管理和表單數據處理
- 使用檔案上傳組件處理文件上傳
- 使用表單驗證確保數據完整性和正確性
- 使用 sessionStorage 在測試環境中暫存申請數據

### 5.2 數據模型

```
// 實習申請數據模型
internshipApplication: {
  id: String,                  // 申請編號 (格式: INT-YYYY-NNN)
  type: String,                // 申請類型 ("internship")
  name: String,                // 申請者姓名
  studentId: String,           // 學號
  email: String,               // 電子郵件
  tel: String,                 // 電話號碼
  applicationDate: String,     // 申請日期 (YYYY/MM/DD)
  churchOrg: String,           // 實習教會/機構
  churchType: String,          // 教會/機構類型
  startDate: String,           // 實習開始日期 (YYYY/MM/DD)
  endDate: String,             // 實習結束日期 (YYYY/MM/DD)
  internshipGoals: String,     // 實習目標
  expectations: String,        // 實習期望
  documents: Array,            // 上傳文件列表
  status: Number,              // 申請狀態 (0: 待審核, 1: 已通過, 2: 已駁回, 3: 進行中, 4: 已完成)
  reviewDate: String,          // 審核日期 (YYYY/MM/DD)
  reviewer: String,            // 審核者
  reviewComment: String        // 審核意見
}
```

### 5.3 API 設計

在目前實現中，前端使用模擬數據，未來可擴展為以下 API：

| 方法 | 路徑                       | 描述             | 參數                   | 返回值       |
| ---- | -------------------------- | ---------------- | ---------------------- | ------------ |
| POST | `/application`             | 提交申請         | 申請表單數據           | 申請結果     |
| POST | `/uploadDocument`          | 上傳文件         | 文件數據               | 文件訪問 URL |
| GET  | `/applicationList`         | 獲取申請列表     | 無                     | 申請列表     |
| PUT  | `/updateApplicationStatus` | 更新申請狀態     | id, status, reviewData | 更新結果     |
| GET  | `/churchOrgList`           | 獲取教會機構列表 | 無                     | 教會機構列表 |

### 5.4 依賴關係

- 依賴 `src/stores/application.js` 進行申請狀態管理
- 依賴 Ant Design Vue 提供表單和上傳組件
- 依賴 `src/mocks/domains/applications/` 提供模擬數據和處理邏輯
- 依賴 `src/schemas/internshipForm.schema.js` 提供表單驗證規則

## 6. UI/UX 設計

### 6.1 頁面設計

- 表單採用清晰的分段結構，使用卡片式布局
- 頁面頂部有明確的標題「實習申請」
- 表單分為四個主要區塊：個人資訊、實習機構、實習詳情、文件上傳
- 使用分步式表單設計，提高使用者體驗
- 底部提供提交和重置按鈕

### 6.2 交互設計

- 分步填寫表單，減少認知負擔
- 輸入欄位提供即時驗證反饋
- 日期選擇器提供日曆界面選擇日期
- 教會/機構可從下拉列表選擇或輸入自定義選項
- 文件上傳區塊提供拖放或點擊上傳功能
- 上傳完成後顯示文件預覽和刪除選項
- 提交按鈕在處理過程中顯示載入狀態
- 提交成功後顯示確認對話框，包含申請編號

### 6.3 頁面元素

- 個人資料輸入欄位（姓名、學號、電子郵件、電話）
- 教會/機構選擇下拉選單，含自定義選項
- 實習時段的開始和結束日期選擇器
- 實習目標和期望的多行文本輸入
- 文件上傳組件
- 步驟導航條
- 提交和重置按鈕
- 成功提示對話框

## 7. 測試計劃

### 7.1 測試策略

- 前端單元測試：驗證表單組件和校驗邏輯
- 文件上傳測試：確保文件可正確上傳和預覽
- 狀態管理測試：確保 Pinia store 正確處理申請數據
- 整合測試：驗證表單提交和狀態更新流程
- 使用者測試：確保表單易於理解和填寫

### 7.2 測試案例

| 測試 ID | 測試描述         | 測試步驟                                               | 期望結果                       | 前置條件         |
| ------- | ---------------- | ------------------------------------------------------ | ------------------------------ | ---------------- |
| TC001   | 表單校驗測試     | 1. 不填寫必填欄位<br>2. 點擊提交按鈕                   | 顯示錯誤提示，阻止提交         | 訪問實習申請頁面 |
| TC002   | 日期選擇測試     | 1. 結束日期早於開始日期<br>2. 點擊提交按鈕             | 顯示日期錯誤提示，阻止提交     | 訪問實習申請頁面 |
| TC003   | 文件上傳測試     | 1. 點擊上傳區域<br>2. 選擇文件上傳                     | 文件成功上傳並顯示預覽         | 訪問實習申請頁面 |
| TC004   | 教會機構選擇測試 | 1. 從下拉列表選擇教會<br>2. 選擇自定義選項並輸入新機構 | 表單正確顯示已選或自定義機構   | 訪問實習申請頁面 |
| TC005   | 成功提交測試     | 1. 填寫所有必填欄位<br>2. 上傳文件<br>3. 點擊提交按鈕  | 顯示成功提示，包含唯一申請編號 | 訪問實習申請頁面 |

## 8. 開發計劃

### 8.1 工作拆分

| 任務             | 估算時間 | 負責人   |
| ---------------- | -------- | -------- |
| 表單 UI 設計     | 已完成   | 開發團隊 |
| 分步表單邏輯     | 已完成   | 開發團隊 |
| 表單驗證邏輯     | 已完成   | 開發團隊 |
| 教會機構選擇功能 | 已完成   | 開發團隊 |
| 日期選擇實現     | 已完成   | 開發團隊 |
| 文件上傳功能     | 已完成   | 開發團隊 |
| Pinia store 實現 | 已完成   | 開發團隊 |
| 申請狀態管理     | 已完成   | 開發團隊 |
| 模擬數據設計     | 已完成   | 開發團隊 |
| 表單提交功能     | 已完成   | 開發團隊 |
| 整體功能測試     | 已完成   | 開發團隊 |

### 8.2 里程碑

| 日期   | 里程碑                     |
| ------ | -------------------------- |
| 已完成 | 表單界面設計和實現         |
| 已完成 | 分步表單邏輯實現           |
| 已完成 | 教會機構選擇和日期選擇功能 |
| 已完成 | 文件上傳功能實現           |
| 已完成 | 資料驗證和提交功能         |
| 已完成 | 申請狀態管理和紀錄         |
| 已完成 | 整合測試和功能完善         |

## 9. 狀態追蹤

### 9.1 開發進度

實習申請功能已完成並整合到系統中。

### 9.2 問題記錄

| 日期 | 問題描述 | 狀態 | 解決方案 |
| ---- | -------- | ---- | -------- |
| -    | -        | -    | -        |

## 10. 備註

- 目前申請數據儲存在前端 sessionStorage，實際上線後需要整合後端 API
- 未來可考慮增加實習評估和反饋功能，讓學生完成實習後可以提交報告
- 可添加實習督導評估功能，收集教會/機構對學生表現的評價
- 可增加實習機會推薦系統，基於學生興趣和需求推薦合適的實習場所
- 考慮增加實習證明生成功能，讓完成實習的學生可以下載正式證明文件
