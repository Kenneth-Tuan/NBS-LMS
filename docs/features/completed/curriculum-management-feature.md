# F012 - 課程管理功能

**狀態:** 已完成  
**優先級:** 高  
**預計完成日期:** 已完成  
**負責人:** 開發團隊

## 1. 功能概述

課程管理功能為神學院提供全面的課程規劃、設置和管理解決方案。該功能允許教務人員創建、修改和組織課程，管理學期和課程表，並維護與課程相關的各類資源。系統支持課程分類、學分設定、先修課程關係，以及課程描述和學習目標等關鍵信息的維護，為學生提供完整的課程資訊並支援教師的教學活動。

## 2. 需求規格

### 2.1 功能需求

- 課程創建與編輯功能
- 課程分類與標籤管理
- 學分設定與學術要求維護
- 先修課程與課程依賴關係設置
- 課程描述、大綱與學習目標管理
- 學期與課程表規劃
- 教師分配與課程負責人設定
- 課程資源與教材管理
- 課程搜索與過濾功能
- 課程審批與發布流程
- 課程歷史版本追蹤
- 課程統計與報表生成

### 2.2 相關需求文檔

- 課程列表與管理實現在 `src/views/Curriculum/CurriculumManagement.vue`
- 課程詳情頁面在 `src/views/Curriculum/CourseDetail.vue`
- 課程編輯頁面在 `src/views/Curriculum/CourseForm.vue`
- 課程數據和狀態管理在 `src/stores/curriculum.js`
- 模擬數據和處理邏輯在 `src/mocks/domains/curriculum/`

## 3. 使用者故事

**作為** 教務主任，  
**我希望** 能夠創建和管理課程與學期計劃，  
**以便** 規劃有效的學術課程並滿足學生的學習需求。

**作為** 學系主任，  
**我希望** 能夠審核和批准由教師提出的課程提案，  
**以便** 確保課程質量並符合學系的學術標準。

**作為** 教師，  
**我希望** 能夠更新我負責課程的大綱和資源，  
**以便** 學生能及時獲得最新的學習材料和要求。

**作為** 神學院學生，  
**我希望** 能夠查看所有可用課程及其詳細描述，  
**以便** 做出明智的選課決定並規劃我的學習路徑。

**作為** 行政人員，  
**我希望** 能夠生成課程統計和報表，  
**以便** 評估課程供需情況並進行策略性教育規劃。

## 4. 流程設計

### 4.1 業務流程

1. 規劃學年和學期設置
2. 創建課程大綱和基本資訊
3. 設定課程分類、學分和先修要求
4. 分配教師和課程資源
5. 審核和批准課程提案
6. 發布課程資訊供學生查詢
7. 根據需求更新和調整課程
8. 生成課程報表和統計分析

### 4.2 使用流程

**課程創建與管理流程：**

1. 管理員進入課程管理頁面
2. 點擊新增課程按鈕
3. 填寫課程基本資訊（名稱、代碼、學分等）
4. 設置課程分類和標籤
5. 指定先修課程和相關課程
6. 上傳課程大綱和資源
7. 提交審核或直接發布

**課程查詢與選擇流程：**

1. 學生登入系統查看課程目錄
2. 使用過濾器按學期、學系或類型過濾課程
3. 查看課程詳情和要求
4. 比較不同課程選項
5. 選擇感興趣的課程加入願望清單

### 4.3 狀態轉換

- 草稿 -> 待審核：課程資訊完成，提交審核
- 待審核 -> 已批准：課程通過審核
- 待審核 -> 需修改：課程審核未通過，需要修改
- 已批准 -> 已發布：課程發布供學生查詢
- 已發布 -> 已更新：課程資訊更新
- 已發布 -> 已存檔：課程不再提供但保留記錄

## 5. 技術設計

### 5.1 架構設計

課程管理功能基於 Vue 3 + Pinia 實現：

- 前端使用 Vue 3 和 Ant Design Vue 構建界面
- 使用 Pinia 進行課程數據和狀態管理
- 使用 Vue Router 處理頁面導航和參數
- 使用表格組件展示課程列表和狀態
- 使用富文本編輯器管理課程描述和大綱
- 使用文件上傳組件管理課程資源
- 使用 sessionStorage 在測試環境中暫存課程數據

### 5.2 數據模型

```
// 課程數據模型
course: {
  id: String,               // 課程ID
  code: String,             // 課程代碼
  title: String,            // 課程名稱
  credits: Number,          // 學分數
  description: String,      // 課程描述
  department: String,       // 所屬學系
  category: String,         // 課程類別
  level: String,            // 課程級別（初級、中級、高級）
  syllabus: String,         // 課程大綱
  learningObjectives: Array, // 學習目標
  prerequisites: [          // 先修課程
    {
      courseId: String,     // 先修課程ID
      courseCode: String,   // 先修課程代碼
      courseTitle: String,  // 先修課程名稱
    }
  ],
  corequisites: [           // 共修課程
    {
      courseId: String,     // 共修課程ID
      courseCode: String,   // 共修課程代碼
      courseTitle: String,  // 共修課程名稱
    }
  ],
  instructors: [            // 任課教師
    {
      id: String,           // 教師ID
      name: String,         // 教師姓名
      email: String,        // 教師電子郵件
      isPrimary: Boolean,   // 是否為主要教師
    }
  ],
  materials: [              // 課程資源
    {
      id: String,           // 資源ID
      title: String,        // 資源標題
      type: String,         // 資源類型
      url: String,          // 資源連結
      isRequired: Boolean,  // 是否必需
    }
  ],
  tags: Array,              // 課程標籤
  status: String,           // 課程狀態
  createdAt: Date,          // 創建時間
  updatedAt: Date,          // 更新時間
  approvedBy: String,       // 批准人
  approvedAt: Date,         // 批准時間
}

// 學期數據模型
term: {
  id: String,               // 學期ID
  academicYear: String,     // 學年
  name: String,             // 學期名稱
  startDate: Date,          // 開始日期
  endDate: Date,            // 結束日期
  registrationStartDate: Date, // 註冊開始日期
  registrationEndDate: Date,   // 註冊結束日期
  courses: [                // 學期課程
    {
      courseId: String,     // 課程ID
      schedule: [           // 課程時間表
        {
          day: String,      // 星期幾
          startTime: String, // 開始時間
          endTime: String,   // 結束時間
          location: String,  // 地點
        }
      ],
      capacity: Number,     // 容量
      enrolledCount: Number, // 已註冊人數
      waitlistCount: Number, // 候補名單人數
    }
  ],
  status: String,           // 學期狀態
  createdAt: Date,          // 創建時間
  updatedAt: Date,          // 更新時間
}

// 課程類別數據模型
courseCategory: {
  id: String,               // 類別ID
  name: String,             // 類別名稱
  description: String,      // 類別描述
  parentId: String,         // 父類別ID
  createdAt: Date,          // 創建時間
  updatedAt: Date,          // 更新時間
}
```

### 5.3 API 設計

在目前實現中，前端使用模擬數據，未來可擴展為以下 API：

| 方法   | 路徑                     | 描述             | 參數                     | 返回值   |
| ------ | ------------------------ | ---------------- | ------------------------ | -------- |
| GET    | `/courses`               | 獲取課程列表     | filters, pagination      | 課程列表 |
| GET    | `/courses/:id`           | 獲取課程詳情     | courseId                 | 課程詳情 |
| POST   | `/courses`               | 創建新課程       | courseObject             | 創建結果 |
| PUT    | `/courses/:id`           | 更新課程資訊     | courseId, updateObject   | 更新結果 |
| DELETE | `/courses/:id`           | 刪除課程         | courseId                 | 刪除結果 |
| PUT    | `/courses/:id/status`    | 更新課程狀態     | courseId, newStatus      | 更新結果 |
| POST   | `/courses/:id/materials` | 添加課程資源     | courseId, materialObject | 添加結果 |
| GET    | `/terms`                 | 獲取學期列表     | filters                  | 學期列表 |
| GET    | `/terms/:id`             | 獲取學期詳情     | termId                   | 學期詳情 |
| POST   | `/terms`                 | 創建新學期       | termObject               | 創建結果 |
| PUT    | `/terms/:id`             | 更新學期資訊     | termId, updateObject     | 更新結果 |
| GET    | `/categories`            | 獲取課程類別     | filters                  | 類別列表 |
| POST   | `/courses/:id/approve`   | 批准課程         | courseId, approvalObject | 批准結果 |
| GET    | `/reports/courses`       | 獲取課程統計報告 | filters                  | 報告數據 |

### 5.4 依賴關係

- 依賴 `src/stores/curriculum.js` 進行課程數據管理
- 依賴 `src/stores/faculty.js` 獲取教師資訊
- 依賴 Ant Design Vue 提供表格、表單和上傳組件
- 依賴 Vue Quill 或類似工具提供富文本編輯功能
- 依賴 `src/mocks/domains/curriculum/` 提供模擬數據和處理邏輯
- 依賴 `src/utils/fileUtils.js` 處理文件上傳和管理
- 依賴 `src/utils/dateUtils.js` 處理日期計算和格式化

## 6. UI/UX 設計

### 6.1 頁面設計

- 課程管理頁面布局：

  - 課程列表表格
  - 過濾和搜索區域
  - 批量操作按鈕
  - 新增課程按鈕
  - 狀態標籤

- 課程詳情頁面：

  - 課程基本資訊區
  - 課程描述和大綱頁籤
  - 先修課程和相關課程區
  - 教師資訊區
  - 課程資源列表
  - 操作按鈕（編輯、審核等）

- 課程編輯頁面：
  - 多步驟表單
  - 基本資訊表單區
  - 課程描述和大綱編輯區
  - 先修課程選擇區
  - 教師分配區
  - 資源上傳區

### 6.2 交互設計

- 課程管理頁面：

  - 課程表格支持排序和篩選
  - 快速編輯功能（狀態、分類等）
  - 批量操作（批准、發布等）
  - 課程狀態視覺指示器
  - 拖拽功能調整課程順序

- 課程編輯頁面：
  - 分步表單減少認知負擔
  - 自動保存草稿功能
  - 實時預覽課程描述
  - 先修課程智能推薦
  - 教師搜索和快速選擇
  - 文件拖拽上傳

### 6.3 頁面元素

- 課程過濾器（學系、類別、狀態等）
- 課程搜索框
- 課程表格與排序選項
- 課程狀態標籤和指示器
- 課程描述富文本編輯器
- 先修課程選擇器
- 教師選擇和分配控件
- 資源上傳和管理控件
- 課程審批流程指示器
- 批次操作下拉菜單
- 日期選擇器和時間表控件

## 7. 測試計劃

### 7.1 測試策略

- 功能測試：確保所有課程管理功能正常運作
- 表單驗證測試：確保課程資訊輸入的有效性
- 狀態管理測試：驗證課程狀態轉換的正確性
- 富文本編輯測試：確保課程描述和大綱編輯功能正常
- 文件上傳測試：確保資源上傳和管理功能可靠
- 搜索和過濾測試：驗證課程查詢功能的準確性
- 權限控制測試：確保不同角色對課程的操作權限正確
- 狀態管理測試：確保 Pinia store 正確處理課程數據
- 易用性測試：確保介面易於使用並高效

### 7.2 測試案例

| 測試 ID | 測試描述         | 測試步驟                                             | 期望結果                             | 前置條件           |
| ------- | ---------------- | ---------------------------------------------------- | ------------------------------------ | ------------------ |
| TC001   | 課程創建功能測試 | 1. 點擊新增課程<br>2. 填寫必要欄位<br>3. 提交表單    | 成功創建課程並顯示在課程列表         | 用戶有課程創建權限 |
| TC002   | 課程編輯功能測試 | 1. 選擇課程<br>2. 點擊編輯<br>3. 修改欄位<br>4. 保存 | 課程資訊成功更新並顯示               | 存在可編輯的課程   |
| TC003   | 課程審批流程測試 | 1. 提交課程審核<br>2. 審核人登入<br>3. 批准課程      | 課程狀態從「待審核」變更為「已批准」 | 有待審核的課程     |
| TC004   | 課程搜索功能測試 | 1. 輸入搜索關鍵字<br>2. 設置過濾條件<br>3. 執行搜索  | 顯示符合條件的課程結果列表           | 系統中存在多個課程 |
| TC005   | 課程資源管理測試 | 1. 選擇課程<br>2. 上傳資源<br>3. 查看資源列表        | 資源成功上傳並顯示在資源列表         | 課程處於可編輯狀態 |
| TC006   | 學期規劃功能測試 | 1. 創建學期<br>2. 分配課程<br>3. 設置時間表          | 成功創建學期並分配課程               | 存在可分配的課程   |

## 8. 開發計劃

### 8.1 工作拆分

| 任務                 | 估算時間 | 負責人   |
| -------------------- | -------- | -------- |
| 課程管理界面設計實現 | 已完成   | 開發團隊 |
| 課程創建和編輯功能   | 已完成   | 開發團隊 |
| 課程分類與標籤管理   | 已完成   | 開發團隊 |
| 先修課程關聯功能     | 已完成   | 開發團隊 |
| 課程資源上傳管理     | 已完成   | 開發團隊 |
| 課程審批流程實現     | 已完成   | 開發團隊 |
| 學期規劃與課程表功能 | 已完成   | 開發團隊 |
| 課程統計和報表功能   | 已完成   | 開發團隊 |
| 整體功能測試         | 已完成   | 開發團隊 |

### 8.2 里程碑

| 日期   | 里程碑                 |
| ------ | ---------------------- |
| 已完成 | 基本課程管理功能       |
| 已完成 | 課程內容和資源管理功能 |
| 已完成 | 先修課程與關聯功能     |
| 已完成 | 課程審批流程功能       |
| 已完成 | 學期規劃與課程表功能   |
| 已完成 | 統計報表與分析功能     |
| 已完成 | 整合測試和功能完善     |

## 9. 狀態追蹤

### 9.1 開發進度

課程管理功能已完成並整合到系統中。

### 9.2 問題記錄

| 日期 | 問題描述 | 狀態 | 解決方案 |
| ---- | -------- | ---- | -------- |
| -    | -        | -    | -        |

## 10. 備註

- 目前課程管理使用模擬數據，實際上線後需要整合真實後端 API
- 未來可考慮實現課程評估和學生反饋功能
- 可增加課程歷史版本比較功能
- 考慮增加課程規劃助手，幫助學生規劃學習路徑
- 可實現課程間依賴關係可視化功能
- 考慮增加與學位要求整合功能，顯示課程對完成學位的貢獻
- 未來可加強與選課系統的整合，實現無縫對接
